create table users(
	username varchar(50) not null primary key,
	password varchar(100) not null,
	enabled boolean not null
);
create table authorities (
	username varchar(50) not null,
	authority varchar(50) not null,
	constraint fk_authorities_users foreign key(username) references users(username)
);
create unique index ix_auth_username on authorities (username,authority);

insert into users(username,password,enabled)
	values('nila','$2a$10$hbxecwitQQ.dDT4JOFzQAulNySFwEpaFLw38jda6Td.Y/cOiRzDFu',true);
insert into authorities(username,authority) 
	values('nila','ROLE_ADMIN');

String encoded=new BCryptPasswordEncoder().encode("admin@123");
System.out.println(encoded);


@Autowired
private DataSource dataSource;

@Override
protected void configure(AuthenticationManagerBuilder auth) throws Exception {

	auth.jdbcAuthentication().dataSource(dataSource)
	    .usersByUsernameQuery("select username, password, enabled"
	        + " from users where username=?")
	    .authoritiesByUsernameQuery("select username, authority "
	        + "from authorities where username=?")
	    .passwordEncoder(new BCryptPasswordEncoder());
}
